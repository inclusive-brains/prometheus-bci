graphs:

# Fake EEG Data + Metric calculation graph
  - id: EEG
    nodes:
    - id: eeg
      module: timeflux.nodes.random
      class: Signal
      params:
        channels: 16
        rate: 250
        amplitude: 100
        names: [ Fp1, Fp2, F3, Fz, F4, C1, Cz, C2, P3, Pz, P4, O1, Oz, O2 ]
    - id: motion
      module: timeflux.nodes.random
      class: Signal
      params:
        channels: 10
        rate: 64
        amplitude: 100
        names: [Q0, Q1, Q2, Q3, ACCZ, ACCY, ACCX, MAGX, MAGY, MAGZ]
    - id: bandpass
      module: timeflux_dsp.nodes.filters
      class: IIRFilter
      params:
        filter_type: bandpass
        frequencies: [0.1, 40]
        order: 2
    - id: filter_bank
      module: timeflux_dsp.nodes.filters
      class: FilterBank
      params:
        filters:
          'delta': {frequencies: [1, 4], order: 3}
          'theta': {frequencies: [5, 7], order: 3}
          'alpha': {frequencies: [8, 12], order: 3}
          'beta':  {frequencies: [13, 20], order: 3}
          'gamma': {frequencies: [25, 40], order: 3}
        design: butter
    - id: band_powers
      module: nodes.eeg_bandpower
      class: Power
      params:
        length: 3
        step: 1
    - id: mean_band_powers
      module: nodes.eeg_bandpower
      class: MeanBandPower
      params:
        length: 3
        step: 1
    - id: median_band_powers
      module: nodes.eeg_bandpower
      class: MedianBandPower
      params:
        length: 3
        step: 1
    - id: mean_fullband_powers
      module: nodes.eeg_bandpower
      class: MeanFullBandPower
      params:
        length: 3
        step: 1
    - id: median_fullband_powers
      module: nodes.eeg_bandpower
      class: MedianFullBandPower
      params:
        length: 3
        step: 1
    - id: pub_bands
      module: timeflux.nodes.zmq
      class: Pub
      params:
        topic: eeg_bandpower
    - id: publish_raw
      module: timeflux.nodes.zmq
      class: Pub
      params:
        topic: eeg_raw
    - id: publish_filtered
      module: timeflux.nodes.zmq
      class: Pub
      params:
        topic: eeg_filtered
    - id: publish_motion
      module: timeflux.nodes.zmq
      class: Pub
      params:
        topic: motion
    - id: publish_mean_band_powers
      module: timeflux.nodes.zmq
      class: Pub
      params:
        topic: eeg_bandpower_mean
    - id: publish_mean_fullband_powers
      module: timeflux.nodes.zmq
      class: Pub
      params:
        topic: eeg_bandpower_mean_fullband
    - id: display
      module: timeflux.nodes.debug
      class: Display
    edges:
      - source: eeg
        target: bandpass
      - source: bandpass
        target: filter_bank
      - source: filter_bank
        target: band_powers
      - source: band_powers
        target: pub_bands
      - source: bandpass
        target: publish_filtered
      - source: eeg
        target: publish_raw
      - source: motion
        target: publish_motion
      - source: band_powers
        target: mean_band_powers
      - source: mean_band_powers
        target: publish_mean_band_powers
      - source: band_powers
        target: mean_fullband_powers
      - source: mean_fullband_powers
        target: publish_mean_fullband_powers
    rate: 10
